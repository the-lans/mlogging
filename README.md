# mlogging
Outputting logs to Telegram



Логирование своих программ с выводом лога в Telegram.

Для того, чтобы всё работало необходимо:

1. Создать Telegram бота

2. Создать Telegram канал

3. Назначить бота администратором канала

4. Необходимую информацию занести в файл tgsettings.ini 

   

Функции для работы:

- log_write_txt(str = "") - Вывод текстового сообщения в лог-файл в формате \<YYYY-mm-dd HH:MM:SS\> \<Text\>. Если параметр str не задан, в лог файле происходит просто переход на новую строку.
- send_tgmessage(text="", res=True, tgres=True) - Вывод текстового сообщения text в лог-файл + в Telegram канал. Параметры tgres и res (для Telegram и лог-файла соответственно отдельно) нужны для накопления текста text во временной переменной для отложеной его отправки. По умолчанию tgres=True и res=True, т.е. накопления не происходит и текст сразу отправляется в лог. Функция возвращает (bool), успешность отправки сообщения.
- send_tgphoto(file_name) - Отправка фото по имени файла file_name. Функция возвращает (bool), успешность отправки сообщения.



Чтобы логирование заработало, необходимо в конфигурационном файле поменять следующие параметры:

- log_dir - Название директории для логов (по умолчанию logs).

- log_file_name - Путь к файлу с логом (по умолчанию ./logs/log_print.txt).

- tglog - Использовать вывод лога в Telegram (True/False)?

- count_exeption - Количество повторений при отправке сообщения (по умолчанию 10). Иногда сообщения не доставляются с первого раза, поэтому повторения для отправки нужны для надёжности.

- sleep_exeption - Задержка между попытками отправить сообщение в секундах (по умолчанию 0.1).

- name_group - Название канала в Telegram. Например, @group_message.

- token - Ваш токен Telegram бота в формате 9999999999:XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.

  

Для интеграции в ваш проект, просто скопируйте папку mlogging в свою директорию, а в файле tglogging.py пропишите путь к конфигурации с помощью переменной PATH_TGCONFIG.



Для работы данного проекта дополнительно нужно установить следующие пакеты:

- Configparser
- PIL
- Telebot

